<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- 1. 核心設定 (這行一定要放第一個，確保編碼正確) -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, interactive-widget=resizes-content" />
    
    <!-- 2. 瀏覽器分頁設定 -->
    <title>Color Mapper</title>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />

    <!-- 3. Open Graph 社群分享設定 (給 FB/LINE/Discord 機器人看的) -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://color-mapper.vercel.app" />
    <meta property="og:title" content="顏色命名實驗 SemanticColorMapper" />
    <meta property="og:description" content="協助建立人類對顏色的感知地圖。你會如何形容這個顏色？" />
    <meta property="og:image" content="https://color-mapper.vercel.app/og-image.png" />

  
    
    <!-- 為了方便，我們還是先留著 CDN 版的 Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            gridTemplateColumns: {
              // ✨ 這裡定義了我們的特殊佈局：兩欄，每欄最大 496px ✨
              // 使用方式：class="grid-cols-layout-desktop"
              'layout-desktop': 'repeat(2, minmax(0, 496px))',
            },
            colors: {
              theme: {
                page: 'var(--color-page-bg)',
                card: 'var(--color-card-bg)',
                'card-border': 'var(--color-card-border)',
                'text-main': 'var(--color-text-main)',
                'text-muted': 'var(--color-text-muted)',
                'text-muted-solid': 'var(--color-text-muted-solid)', // ✨ Added: Opaque muted text
                'text-underline': 'var(--color-text-underline)',
                input: 'var(--color-input-bg)',
                'input-border': 'var(--color-input-border)',
                'input-action': 'var(--color-input-action)',
                brand: 'var(--color-brand-main)',
                'brand-bg': 'var(--color-brand-surface)',
                'brand-text': 'var(--color-brand-text)',
                'toast-bg': 'var(--color-toast-bg)',
                'toast-border': 'var(--color-toast-border)',
              }
            }
          }
        }
      }
    </script>
    <script>
      if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.documentElement.classList.add('dark');
      } else {
        document.documentElement.classList.remove('dark');
      }
      window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
        if (event.matches) document.documentElement.classList.add('dark');
        else document.documentElement.classList.remove('dark');
      });
    </script>
    <style type="text/tailwindcss">
      :root {
        --color-page-bg: theme('colors.slate.50');
        --color-card-bg: theme('colors.white');
        --color-card-border: color-mix(in srgb, theme('colors.slate.600') 8%, transparent);
        --color-text-main: theme('colors.slate.900');
        --color-text-muted: oklch(21.7% 0.07 257 / 0.55);
        --color-text-underline: oklch(21.7% 0.07 257 / 0.35);
        --color-input-bg: theme('colors.slate.100');
        --color-input-border: theme('colors.slate.200');
        --color-input-action: theme('colors.slate.200'); /* New: For Skip button */
        --color-brand-main: theme('colors.indigo.600');
        --color-brand-surface: theme('colors.indigo.50');
        --color-brand-text: theme('colors.indigo.700');
        --color-toast-bg:  color-mix(in srgb, theme('colors.slate.200') 40%, transparent);
        --color-toast-border: color-mix(in srgb, theme('colors.blue.900') 8%, transparent);
        --color-chart-grid: theme('colors.white');
        --color-chart-axis: oklch(21.7% 0.07 257 / 0.55);
        --color-chart-gamut: oklch(21.7% 0.07 257 / 0.55);
        --color-chart-text-cell-light: color-mix(in srgb, theme('colors.slate.800') 75%, transparent);
        --color-chart-text-cell-dark: color-mix(in srgb, theme('colors.slate.50') 90%, transparent);
      }
      .dark {
        --color-page-bg: theme('colors.zinc.950');
        --color-card-bg: theme('colors.zinc.900');
        --color-card-border: color-mix(in srgb, theme('colors.white') 15%, transparent);
        --color-text-main: theme('colors.zinc.100');
        --color-text-muted: oklch(99% 0.006 286.3 / 0.55);
        --color-text-underline: oklch(99% 0.006 286.3 / 0.35);
        --color-input-bg: theme('colors.zinc.800');
        --color-input-border: color-mix(in srgb, theme('colors.zinc.700') 60%, transparent);
        --color-input-action: theme('colors.zinc.700'); /* New: For Skip button */
        --color-brand-main: color-mix(in srgb, theme('colors.indigo.500') 70%, theme('colors.indigo.600'));
        --color-brand-surface: color-mix(in srgb, theme('colors.indigo.500') 25%, transparent);
        --color-brand-text: theme('colors.indigo.200');
        --color-toast-bg: color-mix(in srgb, theme('colors.zinc.700') 60%, transparent);
        --color-toast-border: color-mix(in srgb, theme('colors.zinc.100') 8%, transparent);
        --color-chart-grid: theme('colors.zinc.900');
        --color-chart-axis: oklch(99% 0.006 286.3 / 0.55);
        --color-chart-gamut: oklch(99% 0.006 286.3 / 0.55);
        --color-chart-text-cell-light: color-mix(in srgb, theme('colors.zinc.900') 80%, transparent);
        --color-chart-text-cell-dark: color-mix(in srgb, theme('colors.zinc.50') 80%, transparent);
      }
      
      /* 強制網頁底色 */
      html, body { 
        font-family: 'Inter', system-ui, sans-serif;
        background-color: var(--color-page-bg);
        height: 100%;
        margin: 0;
      }

      /* 隱藏 Chrome/Safari search input 預設的 "X" 按鈕 */
      input[type="search"]::-webkit-search-decoration,
      input[type="search"]::-webkit-search-cancel-button,
      input[type="search"]::-webkit-search-results-button,
      input[type="search"]::-webkit-search-results-decoration {
        -webkit-appearance: none;
        display: none;
      }

      /* ✨ 隱藏捲動條 (No Scrollbar) Utility ✨ */
      /* Chrome, Safari, Opera */
      .no-scrollbar::-webkit-scrollbar {
        display: none;
      }
      /* IE, Edge, Firefox */
      .no-scrollbar {
        -ms-overflow-style: none;  /* IE and Edge */
        scrollbar-width: none;  /* Firefox */
      }
    </style>


<script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@^19.2.3",
    "react-dom/": "https://esm.sh/react-dom@^19.2.3/",
    "react/": "https://esm.sh/react@^19.2.3/",
    "@google/genai": "https://esm.sh/@google/genai@^1.34.0",
    "d3": "https://esm.sh/d3@^7.9.0",
    "d3-delaunay": "https://esm.sh/d3-delaunay@^6.0.4",
    "firebase/": "https://esm.sh/firebase@^12.7.0/",
    "@paper-design/shaders-react": "https://esm.sh/@paper-design/shaders-react@^0.0.71"
  }
}
</script>
</head>
  <body>
    <div id="root"></div>
    <script type="module" src="/index.tsx"></script>
  </body>
</html>
